import assert from 'assert';

import {extractBaseType} from 'app/elasticsearch/types/genericTypes';

describe('elasticsearch/utils/aggParams', function () {

	describe('Extract base type (remove optionality) - Simple type', function () {
		it('should return the same type', function () {
			const type = 'someType';

			const expected = 'someType';
			const actual = extractBaseType(type);

			assert.deepStrictEqual(actual, expected);
		});
	});

	describe('Extract base type (remove optionality) - Optional type', function () {
		it('should return the base type (a simple type)', function () {
			const type = ['someType', 'undefined'];

			const expected = 'someType';
			const actual = extractBaseType(type);

			assert.deepStrictEqual(actual, expected);
		});
	});

	describe('Extract base type (remove optionality) - Optional type union', function () {
		it('should return the base type (a type union)', function () {
			const type = ['someType', 'someOtherType', 'undefined'];

			const expected = ['someType', 'someOtherType'];
			const actual = extractBaseType(type);

			assert.deepStrictEqual(actual, expected);
		});
	});

});
