// eslint-disable-next-line node/no-unpublished-import
import { get } from 'svelte/store';
// eslint-disable-next-line node/no-unpublished-import
import { assign } from 'xstate';

import { spawnNestedForm } from './_options';
// import * as _ from 'lamb';

function selectForm (ctx, event) {
	console.log('form selected')
	// const form1 = get(ctx.selectedForm);
	const form = event.form || get(ctx.forms)[0];
	ctx.selectedForm.set(form);
	form.machine.send('FORM_ACTIVATING');
	// form.machine.subscribe()
}

export const routeOptions = {
	actions: {
		/**
		 * Initialize the context
		 */
		selectForm: assign(selectForm),
		/**
		 * Creates a new form for configuring a subaggregation
		 */
		spawnNestedForm: assign(spawnNestedForm),
		/*
		log: (ctx, event) => {
			console.log('logging route', ctx, event)
		}*/
	},
	guards: {
	}
};
