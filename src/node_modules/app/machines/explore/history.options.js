import {get} from 'svelte/store';

import {makeExploreQuery} from 'app/utils/exploreUtils';

export const historyOptions = {
	actions: {
		updateEntry: ctx => {
			if (typeof window !== 'undefined') {
				const {project, version} = get(ctx.dataset);
				const fields = get(ctx.selectedFields);
				const query = makeExploreQuery({fields, project, version});
				const url = `${window.location.pathname}?${query}`;
				history.pushState(null, window.title, url);
			}
		}
	},
	guards: {}
};
