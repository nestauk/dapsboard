<script>
	import JSONTree from 'svelte-json-tree'

	export let datasetInfo;
	export let query;
    export let responsePromise;
    
    let response;
    let composite;

    function computeComposite(datasetInfo, query, response) {
        return {};
    }

    $: responsePromise.then( r => response = r);
    $: composite = computeComposite(datasetInfo, query, response);
</script>

<div>
	<h2>Dataset Information</h2>
	<JSONTree value={datasetInfo} />

	<h2>Query</h2>
	<JSONTree value={query} />

	<h2>Aggregation Results</h2>
	{#await responsePromise}
		Loading...
	{:then value}
		<JSONTree {value} />
	{:catch error}
		<p style="color: red">{error.message}</p>
	{/await}
</div>

<style>
	div {
		width: 100%;
		height: 100%;
		overflow-y: auto;
		font-family: courier;
	}
</style>
