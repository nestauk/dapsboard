<script>
export let options;
export let selectedOption;
export let unselectable = true;
export let hideDisabled = false;

function handleClick (v, isDisabled) {
	if (unselectable && selectedOption === v) {
		selectedOption = undefined;
		return;
	}

	if (!isDisabled) {
		selectedOption = v;
	}
}
</script>

<ul>
	{#each options as opt}
		{#if !(opt.disabled && hideDisabled) || opt.value === selectedOption}
			<li
				class:disabled={opt.disabled}
				class:effaced={opt.effaced}
				class:selected='{opt.value === selectedOption}'
				on:click='{() => handleClick(opt.value, opt.disabled)}'
			 	class="clickable"
			>
				<slot option={opt}>
					{opt.text}
				</slot>
			</li>
		{/if}
	{/each}
</ul>

<style>
ul {
	grid-area: select;
	overflow: auto;
}

li.disabled {
	color: #fC8;
	font-weight: normal;
}

li.selected {
	background: #248;
	color: white
}

li.selected.disabled,
li.selected.effaced {
	background: #842;
}

li.effaced {
	color: #8cf;
}
</style>
