<script>
export let options;
export let selectedOption;
export let unselectable = true;
export let hideDisabled = false;

function handleClick (v, isDisabled) {
	if (unselectable && selectedOption === v) {
		selectedOption = undefined;
		return;
	}

	if (!isDisabled) {
		selectedOption = v;
	}
}
</script>

<ul>
	{#each options as opt}
		{#if !(opt.disabled && hideDisabled) || opt.value===selectedOption}
			<li 
				on:click={() => handleClick(opt.value, opt.disabled)} 
				class:disabled={opt.disabled} 
				class:selected={opt.value===selectedOption}
				class:effaced={opt.effaced}
			>{opt.text}</li>
		{/if}
	{/each}
</ul>

<style>
ul {
	grid-area: select;
	overflow: auto;
}

li {
	cursor: pointer;
}

li.disabled {
	color: #fC8;
	font-weight: normal;
}

li.selected {
	background: #248;
	color: white
}

li.selected.disabled {
	background: #842;
}

li.effaced {
	color: #8cf;
}
</style>
