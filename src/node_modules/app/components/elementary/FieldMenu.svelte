<script>
	import {createEventDispatcher} from 'svelte';

	import FieldCount from './FieldCount.svelte';

	const dispatch = createEventDispatcher();

	export let fieldCounts = [];
	export let selectedFieldName;

	function selectField (fieldName) {
		selectedFieldName = fieldName;
		dispatch('fieldSelected', fieldName);
	}
	function emitDetailsRequest (fieldName) {
		dispatch('requestDetails', fieldName);
	}
</script>

{#each fieldCounts as field}
	<div
		on:mousedown={() => selectField(field.name)}
		on:mouseenter={() => emitDetailsRequest(field.name)}
		class:selected={field.name === selectedFieldName}
	>
		<FieldCount
			fieldName={field.name}
			count={field.count}
			suggestions={field.suggestions}
		/>
	</div>
{/each}

<style>
	div {
		background: white;
		border-radius: 3px;
		border: 1px solid #0DA8ED;
		font-size: medium;
		margin: 0 .75em;
		padding: .5em;
	}

	.selected {
		background: blue;
		color: white;
	}
</style>
