<script>
	import {createEventDispatcher} from 'svelte';

	import FieldCount from './FieldCount.svelte';

	const dispatch = createEventDispatcher();

	export let fieldStats = [];
	export let selectedFieldName;
	export let suggestions = [];

	function selectField (fieldName) {
		selectedFieldName = fieldName;
		dispatch('fieldSelected', fieldName);
	}
	function emitDetailsRequest (fieldName) {
		dispatch('requestDetails', fieldName);
	}
</script>

<div class='container'>
	<div>
		{#each fieldStats as field}
			<div
				class='fields'
				on:mousedown={() => selectField(field.name)}
				on:mouseenter={() => emitDetailsRequest(field.name)}
				class:selected={field.name === selectedFieldName}
			>
				<FieldCount
					fieldName={field.name}
					count={field.count}
				/>
			</div>
		{/each}
	</div>
	<section>
		{suggestions}
	</section>
</div>

<style>
	.container {
		background: white;
		display: grid;
		grid-template-columns: 1fr 1fr;
	}
	.fields {
		background: white;
		border-radius: 3px;
		border: 1px solid #0DA8ED;
		font-size: medium;
		margin: 0 .75em;
		padding: .5em;
	}

	.selected {
		background: blue;
		color: white;
	}
</style>
