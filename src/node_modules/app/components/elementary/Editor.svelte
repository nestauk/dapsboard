<script>
	import { createEventDispatcher } from 'svelte';
	import { autoID } from 'app/utils';

	const dispatch = createEventDispatcher();

	const id = autoID();

	export let labelText = '';
	export let dataType = 'text';
	export let value;

	let type;

	const inputTypes = {
		date: 'date',
		'Opaque<string, "Date_YYYYMMDD_dash">': 'date',
		'Opaque<string, "Date_YYYYMMDD_dash_time">': 'date',
		'Opaque<string, "ES_keyword">': 'text',
		'Opaque<string, "ES_text">': 'text',
		'Opaque<string, "ES_text_w_keyword">': 'text',
		'Opaque<number, "integer">': 'number',
		'Opaque<number, "float">': 'number',
		string: 'text'
	}

	function computeInputType(esType) {
		console.log(inputTypes[esType]);
		return inputTypes[esType];
	}

	$: type = computeInputType(dataType);
</script>

<label for={id}>{labelText}</label>
<input {id} {type} {value} on:change={(e) => {dispatch('change', e.target.value);}}>