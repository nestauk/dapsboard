<script>
export let value;

let json = '';

function generateHTML(value) {
    const nodeType = typeof(value);
    switch (nodeType) {
        case 'boolean':
        case 'number':
            return value.toString();
        case 'string':
            return `"${value}"`;
        case 'object':
            if (value === null)
                return 'null';
            else if (Array.isArray(value)) {
                let propsHtml = value.map(v => `<li><span class='property-value'>${generateHTML(v)}</span></li>`);
                return `<span class='boilerplate'>[</span> <ul class='property-list'>${propsHtml.join('')}</ul> <span class='boilerplate'>]</span>`;
            }
            else {
                let propsHtml = Object.keys(value).map(k => `<li><span class='property-name'>"${k}"</span> <span class='boilerplate'>:</span> <span class='property-value'>${generateHTML(value[k])}</span></li>`);
                return `<span class='boilerplate'>{</span> <ul class='property-list'>${propsHtml.join('')}</ul> <span class='boilerplate'>}</span>`;
            }
    }
}

$: json = generateHTML(value);
</script>

<pre>{@html json}</pre>

<style>
pre {
    overflow: auto;
    width: 100%;
    height: 100%;
}
:global(.boilerplate) {
    color: #fC8;
}
:global(.property-list) {
    margin-left: 1em;
    list-style-type: none;
}
:global(.property-name) {
    font-weight: bold;
    color: #000;
}
:global(.property-value) {
    color: #00F;
}
:global(li:not(:last-child):after) {
    content: ',';
}
</style>