<script>
export let value;

let json = '';

function generateHTML(value) {
    const nodeType = typeof(value);
    switch (nodeType) {
        case 'boolean':
        case 'number':
            return value.toString();
        case 'string':
            return `"${value}"`;
        case 'object':
            if (value === null)
                return 'null';
            else if (Array.isArray(value)) {
                let propsHtml = value.map(v => `<li><span class='property-value'>${generateHTML(v)}</span></li>`);
                return `[ <ul class='property-list'>${propsHtml.join('')}</ul> ]`;
            }
            else {
                let propsHtml = Object.keys(value).map(k => `<li><span class='property-name'>"${k}"</span> : <span class='property-value'>${generateHTML(value[k])}</span></li>`);
                return `{ <ul class='property-list'>${propsHtml.join('')}</ul> }`;
            }
    }
}

$: json = generateHTML(value);
</script>

<pre>{@html json}</pre>

<style>
pre {
    overflow: auto;
}
:global(.property-list) {
    margin-left: 1em;
    list-style-type: none;
}
:global(.property-name) {
    font-weight: bold;
    color: #000;
}
:global(.property-value) {
    color: #F08;
}
</style>