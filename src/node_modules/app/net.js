export async function request(
    fetch,
    method,
    url,
    { headers = {}, data } = {}
) {
    let reqOptions = { method, headers };
    if (data) {
        if (data instanceof FormData) {
            reqOptions.headers["content-type"] = "multipart/form-data";
            reqOptions.body = data;
        }
        else {
            reqOptions.headers["content-type"] = "application/json";
            reqOptions.body = JSON.stringify(data);
        }
    }
    try {
        let response = await fetch(url, reqOptions);
        if (Math.floor(response.status / 100) !== 2) {
            throw new Error(
                `API request failed! - ${response.status}: ${response.statusText}`
            );
        }
        return await response.json();
    } catch (error) {
        logError(error, error.stack);
        throw error;
    }
}

function logError(e, s) {
    console.log(e);
    console.log(s);
}
